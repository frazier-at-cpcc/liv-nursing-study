<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newborn Care Study Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style for draggable items */
        .draggable {
            cursor: move;
            user-select: none;
            transition: background-color 0.2s;
        }
        /* Style for when an item is being dragged */
        .dragging {
            opacity: 0.5;
            background: #e0e7ff;
        }
        /* Style for the drop zone */
        .drag-over {
            border-color: #4f46e5;
        }
        /* Custom styles for feedback box */
        #feedback-box {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-3xl mx-auto">
        
        <!-- Start Screen -->
        <div id="start-screen" class="text-center bg-white p-8 rounded-xl shadow-lg">
            <h1 class="text-4xl font-bold text-indigo-600 mb-4">Newborn Care NCLEX Prep</h1>
            <p class="text-slate-600 mb-8">Test your knowledge with multiple choice, select-all-that-apply, and ordering questions based on your study material.</p>
            <button id="start-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Start Game</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                <div class="flex justify-between items-start mb-4">
                    <p class="text-sm font-medium text-slate-500">Question <span id="question-number"></span> of <span id="total-questions"></span></p>
                    <p class="text-sm font-bold text-indigo-600 bg-indigo-100 py-1 px-3 rounded-full">Score: <span id="score">0</span></p>
                </div>

                <div id="question-container" class="mb-6">
                    <p id="question-text" class="text-lg font-semibold leading-relaxed"></p>
                    <p id="question-prompt" class="text-sm text-slate-500 mt-1"></p>
                </div>

                <div id="options-container" class="space-y-3">
                    <!-- Options will be dynamically inserted here -->
                </div>

                <div id="feedback-box" class="mt-6 p-4 rounded-lg hidden opacity-0">
                    <h3 id="feedback-title" class="font-bold text-lg mb-1"></h3>
                    <p id="feedback-text" class="text-sm"></p>
                </div>
                
                <div class="mt-8 flex flex-col sm:flex-row gap-3">
                     <button id="submit-btn" class="w-full sm:w-auto flex-grow bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Submit Answer</button>
                     <button id="next-btn" class="w-full sm:w-auto flex-grow bg-slate-200 text-slate-800 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 hidden">Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden text-center bg-white p-8 rounded-xl shadow-lg">
            <h2 class="text-3xl font-bold text-indigo-600 mb-3">Quiz Complete!</h2>
            <p class="text-slate-600 mb-6">You've completed the study game.</p>
            <div class="mb-8">
                <p class="text-lg">Your Final Score:</p>
                <p class="text-5xl font-extrabold text-indigo-600 my-2"><span id="final-score"></span>%</p>
                <p class="text-slate-500"><span id="correct-answers"></span> out of <span id="total-final-questions"></span> correct</p>
            </div>
            <button id="restart-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Play Again</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                type: 'ordering',
                question: 'A nurse is performing an APGAR assessment on a newborn. Prioritize the following components from most to least critical.',
                prompt: 'Drag and drop the items into the correct order.',
                items: ['Muscle Tone', 'Heart Rate', 'Skin Color', 'Respiratory Effort', 'Reflex Irritability'],
                answer: ['Heart Rate', 'Respiratory Effort', 'Muscle Tone', 'Reflex Irritability', 'Skin Color'],
                explanation: 'According to the presentation, Heart Rate is the most important assessment, followed by Respiratory Effort. These are critical for determining the need for immediate resuscitation.'
            },
            {
                type: 'multiple-choice',
                question: 'A nurse assesses a quiet, 1-hour-old newborn. Which finding would be considered within the normal range?',
                options: [
                    'Heart rate of 95 bpm',
                    'Respiratory rate of 65 bpm',
                    'Axillary temperature of 36.1°C (97.0°F)',
                    'Blood glucose of 35 mg/dL'
                ],
                answer: 'Respiratory rate of 65 bpm',
                explanation: 'Normal newborn respiratory rate is 30-70 bpm. Normal heart rate is 110-160 bpm, axillary temperature is 36.5-37.5°C, and blood glucose should be 40-60 mg/dL.'
            },
            {
                type: 'multiple-select',
                question: 'During a head-to-toe assessment, a nurse observes several skin variations on a term newborn. Which of the following are considered normal, benign findings that do not require immediate intervention?',
                prompt: '(Select all that apply.)',
                options: [
                    'Jaundice appearing within the first 24 hours of life.',
                    'Raised white spots on the nose and chin (Milia).',
                    'Bluish-purple spots on the buttocks (Mongolian spots).',
                    'A pink rash with small pustules on the trunk (Erythema toxicum).',
                    'Localized swelling on the head that crosses suture lines (Caput Succedaneum).'
                ],
                answer: [
                    'Raised white spots on the nose and chin (Milia).',
                    'Bluish-purple spots on the buttocks (Mongolian spots).',
                    'A pink rash with small pustules on the trunk (Erythema toxicum).',
                    'Localized swelling on the head that crosses suture lines (Caput Succedaneum).'
                ],
                explanation: 'Jaundice within the first 24 hours is considered pathologic and requires further investigation. Milia, Mongolian spots, Erythema toxicum, and Caput Succedaneum are all common, benign findings in newborns.'
            },
            {
                type: 'multiple-choice',
                question: 'A newborn is noted to have a collection of blood between the periosteum and the skull bone that does not cross the suture lines. The nurse correctly identifies this finding as:',
                options: [
                    'Molding',
                    'Hydrocephalus',
                    'Caput Succedaneum',
                    'Cephalhematoma'
                ],
                answer: 'Cephalhematoma',
                explanation: 'A Cephalhematoma is a collection of blood that does not cross suture lines. Caput Succedaneum is swelling that does cross suture lines.'
            },
            {
                type: 'multiple-select',
                question: 'A nurse is monitoring a preterm newborn for Respiratory Distress Syndrome (RDS). Which signs would indicate the newborn is experiencing respiratory distress?',
                prompt: '(Select all that apply.)',
                options: [
                    'Respiratory rate of 45 bpm',
                    'Audible expiratory grunting',
                    'Nasal flaring',
                    'Acrocyanosis',
                    'Intercostal retractions'
                ],
                answer: ['Audible expiratory grunting', 'Nasal flaring', 'Intercostal retractions'],
                explanation: 'Signs of RDS include tachypnea (RR>60), grunting, nasal flaring, and retractions. A respiratory rate of 45 bpm and acrocyanosis (bluish hands/feet) are normal findings in a newborn.'
            },
             {
                type: 'multiple-choice',
                question: 'Why is a Vitamin K injection administered to a newborn shortly after birth?',
                options: [
                    'To prevent ophthalmia neonatorum',
                    'To enhance the immune response to the Hepatitis B vaccine',
                    'To prevent hemorrhagic disorders',
                    'To treat physiologic jaundice'
                ],
                answer: 'To prevent hemorrhagic disorders',
                explanation: 'Newborns have sterile guts and cannot produce Vitamin K initially, which is essential for blood clotting. The injection prevents Vitamin K deficiency bleeding (hemorrhagic disease of the newborn). Erythromycin ointment is used to prevent eye infections.'
            },
            {
                type: 'multiple-select',
                question: 'The nurse knows to monitor which newborns closely for signs of hypoglycemia?',
                prompt: '(Select all that apply.)',
                options: [
                    'A newborn who is small for gestational age (SGA)',
                    'A post-term newborn (42+ weeks)',
                    'A newborn whose mother has diabetes',
                    'An average for gestational age (AGA) newborn',
                    'A newborn who is large for gestational age (LGA)'
                ],
                answer: [
                    'A newborn who is small for gestational age (SGA)',
                    'A post-term newborn (42+ weeks)',
                    'A newborn whose mother has diabetes',
                    'A newborn who is large for gestational age (LGA)'
                ],
                explanation: 'Risk factors for hypoglycemia include being SGA, LGA, post-term, preterm, and having a mother with diabetes. These newborns have either insufficient glycogen stores or experience hyperinsulinism.'
            },
            {
                type: 'ordering',
                question: 'A baby has just been delivered. Place the following initial nursing interventions in the correct order of priority.',
                prompt: 'Drag and drop the items into the correct order.',
                items: ['Dry the newborn immediately', 'Perform the 1-minute APGAR score', 'Suction the mouth and nose as needed', 'Place the newborn skin-to-skin'],
                answer: ['Suction the mouth and nose as needed', 'Dry the newborn immediately', 'Place the newborn skin-to-skin', 'Perform the 1-minute APGAR score'],
                explanation: 'The first priority is always clearing the airway (suctioning). Next is drying the infant to prevent heat loss (thermoregulation). Then, promoting bonding and warmth with skin-to-skin contact. The APGAR score is assessed at the 1-minute mark.'
            },
             {
                type: 'multiple-choice',
                question: 'A new mother is concerned about her 3-day-old, breastfed baby\'s stools. Which description would the nurse identify as normal for a breastfed newborn?',
                options: [
                    'Thick, tarry, and black',
                    'Pale and formed, like clay',
                    'Pale yellow and more liquid',
                    'The baby hasn\'t had a stool in 2 days'
                ],
                answer: 'Pale yellow and more liquid',
                explanation: 'Thick, tarry stools are meconium, seen in the first 1-2 days. By day 3, a breastfed baby\'s stool transitions to a yellow, seedy, and more liquid consistency. Pale/clay-colored stools are associated with formula feeding or potential liver issues.'
            },
            {
                type: 'multiple-select',
                question: 'A nurse is providing discharge education to first-time parents. Which of the following topics are essential to include?',
                prompt: '(Select all that apply.)',
                options: [
                    'How to properly use a car seat',
                    'Signs and symptoms of illness',
                    'Umbilical cord care',
                    'Giving the newborn water between feeds to stay hydrated',
                    'The immunization schedule'
                ],
                answer: [
                    'How to properly use a car seat',
                    'Signs and symptoms of illness',
                    'Umbilical cord care',
                    'The immunization schedule'
                ],
                explanation: 'Essential discharge teaching includes safety (car seat), recognizing problems (illness signs), basic care (cord care), and health promotion (immunizations). Newborns should not be given supplemental water as it can lead to electrolyte imbalances.'
            },
            {
                type: 'multiple-choice',
                question: 'During the neonatal transition period, which of the following is NOT one of the primary concerns for nurses?',
                options: [
                    'Cardiac function',
                    'Digestive function',
                    'Respiratory function',
                    'Thermoregulation'
                ],
                answer: 'Digestive function',
                explanation: 'During the first 6 hours of life, the primary concerns are adapting to extrauterine life, focusing on cardiac function, respiratory function, and thermoregulation. Digestive function is monitored but is not as immediately critical.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the normal respiratory rate for a newborn?',
                options: [
                    '20-40 breaths per minute',
                    '30-70 breaths per minute',
                    '80-100 breaths per minute',
                    '100-120 breaths per minute'
                ],
                answer: '30-70 breaths per minute',
                explanation: 'The normal respiratory rate for a newborn is between 30 and 70 breaths per minute. It can be shallow and irregular.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a characteristic of normal newborn breathing?',
                options: [
                    'Primarily thoracic breathing',
                    'Deep and regular breathing',
                    'Diaphragmatic breathing',
                    'Continuous breathing without pauses'
                ],
                answer: 'Diaphragmatic breathing',
                explanation: 'Newborns are obligate nose breathers and use their diaphragms to breathe. Short pauses (periodic breathing) are normal.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the normal heart rate range for a newborn?',
                options: [
                    '60-100 beats per minute',
                    '80-120 beats per minute',
                    '110-160 beats per minute',
                    '160-200 beats per minute'
                ],
                answer: '110-160 beats per minute',
                explanation: 'The normal heart rate for a newborn ranges from 110 to 160 beats per minute, with fluctuations depending on activity level (sleeping vs. crying).'
            },
            {
                type: 'multiple-choice',
                question: "When performing initial care of the newborn, what is the correct sequence?",
                options: [
                    "Dry baby, suction, place on mother's abdomen",
                    "Suction as needed, dry immediately, place on mother's abdomen",
                    "Place on mother's abdomen, dry baby, suction",
                    "Warm baby, suction, perform Apgar score"
                ],
                answer: "Suction as needed, dry immediately, place on mother's abdomen",
                explanation: "The priority is establishing a clear airway (suctioning if needed), followed by preventing heat loss by drying the baby. Placing the baby skin-to-skin on the mother's abdomen helps with thermoregulation and bonding."
            },
            {
                type: 'multiple-choice',
                question: 'What is considered a normal temperature range for a newborn?',
                options: [
                    '35.5 to 36.5°C (95.9 to 97.7°F)',
                    '36.5 to 37.5°C (97.7 to 99.5°F)',
                    '37.5 to 38.5°C (99.5 to 101.3°F)',
                    '38.5 to 39.5°C (101.3 to 103.1°F)'
                ],
                answer: '36.5 to 37.5°C (97.7 to 99.5°F)',
                explanation: 'Maintaining a stable temperature is critical for the newborn. The normal axillary temperature range is 36.5 to 37.5°C (97.7 to 99.5°F).'
            },
            {
                type: 'multiple-choice',
                question: 'What is the expected weight loss for a newborn in the first few days of life?',
                options: [
                    '1-3% of birth weight',
                    '5-10% of birth weight',
                    '15-20% of birth weight',
                    '25-30% of birth weight'
                ],
                answer: '5-10% of birth weight',
                explanation: 'It is normal for newborns to lose 5-10% of their birth weight in the first few days. They should regain this weight within 10 to 14 days.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a sign of respiratory distress syndrome (RDS)?',
                options: [
                    'Bradypnea (RR <20)',
                    'Decreased work of breathing',
                    'Nasal flaring and grunting',
                    'Pink coloration of extremities'
                ],
                answer: 'Nasal flaring and grunting',
                explanation: 'Signs of RDS include tachypnea (RR>60), nasal flaring, expiratory grunting, and retractions as the infant works harder to breathe.'
            },
            {
                type: 'multiple-choice',
                question: 'How often should vital signs be taken in the first two hours after birth?',
                options: [
                    'Every 15 minutes',
                    'Every 30 minutes',
                    'Every hour',
                    'Every 2 hours'
                ],
                answer: 'Every 30 minutes',
                explanation: 'A typical protocol is to check vital signs at birth, then every 30 minutes for two times, then every hour for two times, and then every 8 hours.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the expected number of wet diapers in the first 24 hours of life?',
                options: [
                    'At least 1',
                    'At least 3',
                    'At least 6',
                    'At least 8'
                ],
                answer: 'At least 1',
                explanation: 'A newborn should have at least one void within the first 24 hours. The number of wet diapers increases to 6-8 per day after the first few days.'
            },
            {
                type: 'multiple-choice',
                question: 'When screening for hypoglycemia, what blood glucose level is considered low?',
                options: [
                    'Less than 20 mg/dL',
                    'Less than 30 mg/dL',
                    'Less than 40 mg/dL',
                    'Less than 50 mg/dL'
                ],
                answer: 'Less than 40 mg/dL',
                explanation: 'A blood glucose level of less than 40 mg/dL is considered hypoglycemia in a newborn and requires intervention.'
            },
            {
                type: 'multiple-choice',
                question: 'Which newborn is at highest risk for developing hypoglycemia?',
                options: [
                    'Term infant with normal birth weight',
                    'Post-term infant with normal birth weight',
                    'Infant of diabetic mother',
                    'Infant born at 39 weeks gestation'
                ],
                answer: 'Infant of diabetic mother',
                explanation: 'Infants of diabetic mothers, along with SGA, LGA, preterm, and post-term infants, are at high risk for hypoglycemia.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the expected time frame for umbilical cord separation?',
                options: [
                    '3-5 days',
                    '10-14 days',
                    '20-25 days',
                    '30-35 days'
                ],
                answer: '10-14 days',
                explanation: 'The umbilical cord stump typically dries up and falls off within 10 to 14 days after birth.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a sign of neonatal sepsis?',
                options: [
                    'Increased appetite',
                    'Temperature stability',
                    'Hyperactivity',
                    'Temperature instability'
                ],
                answer: 'Temperature instability',
                explanation: 'Signs of infection in a newborn can be subtle. Temperature instability (either fever or hypothermia) is a key indicator of sepsis.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the recommended first feeding time for a healthy newborn?',
                options: [
                    'Within the first hour',
                    'By hour 5',
                    'After 8 hours',
                    'When the baby cries'
                ],
                answer: 'By hour 5',
                explanation: 'While breastfeeding is encouraged during the first period of reactivity (often within the first hour), bottle feeding should be initiated by hour 5 if needed.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is NOT a risk factor for neonatal withdrawal?',
                options: [
                    'Maternal alcohol use',
                    'Maternal drug use',
                    'Maternal exercise',
                    'Maternal smoking'
                ],
                answer: 'Maternal exercise',
                explanation: 'Neonatal withdrawal syndrome is caused by in-utero exposure to substances like alcohol or illicit drugs. Maternal exercise is healthy and not a risk factor.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the normal head circumference range for a newborn?',
                options: [
                    '28 to 30.8 cm',
                    '32 to 36.8 cm',
                    '38 to 42.8 cm',
                    '42 to 46.8 cm'
                ],
                answer: '32 to 36.8 cm',
                explanation: 'The average head circumference for a full-term newborn is 32 to 36.8 cm (12.6 to 14.5 inches).'
            },
            {
                type: 'multiple-choice',
                question: "When assessing a newborn's gestational age, which physical characteristic is NOT evaluated?",
                options: [
                    'Skin texture',
                    'Lanugo',
                    'Blood pressure',
                    'Ear cartilage'
                ],
                answer: 'Blood pressure',
                explanation: 'The New Ballard Scale for gestational age assesses physical characteristics like skin, lanugo, sole creases, breast tissue, and ear cartilage, as well as neuromuscular maturity. Blood pressure is a vital sign, not a component of this assessment.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the typical discharge timing for uncomplicated newborn deliveries?',
                options: [
                    '24 hours',
                    '48-72 hours',
                    '4-5 days',
                    '7 days'
                ],
                answer: '48-72 hours',
                explanation: 'For a healthy, full-term newborn without complications, discharge from the hospital usually occurs between 48 and 72 hours after birth.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a sign of transient tachypnea of the newborn?',
                options: [
                    'Decreased respiratory rate',
                    'Increased work of breathing',
                    'Decreased heart rate',
                    'Normal respiratory effort'
                ],
                answer: 'Increased work of breathing',
                explanation: 'Transient tachypnea of the newborn (TTN) is characterized by a high respiratory rate (tachypnea), grunting, flaring, and increased work of breathing that typically resolves within 24-48 hours.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following best defines chronic hypertension in pregnancy?',
                options: [
                    'Blood pressure that develops after 20 weeks gestation',
                    'Blood pressure that resolves by 12 weeks postpartum',
                    'Blood pressure present before pregnancy or diagnosed before 20 weeks gestation',
                    'Blood pressure that only occurs during labor'
                ],
                answer: 'Blood pressure present before pregnancy or diagnosed before 20 weeks gestation',
                explanation: 'Chronic hypertension is a pre-existing condition, unlike gestational hypertension which develops after 20 weeks.'
            },
            {
                type: 'multiple-choice',
                question: 'What are the diagnostic criteria for gestational hypertension?',
                options: [
                    'SBP > 130 mmHg, DBP > 80 mmHg, with proteinuria',
                    'SBP > 140 mmHg, DBP > 90 mmHg, onset after 20 weeks, resolves by 12 weeks postpartum',
                    'SBP > 140 mmHg, DBP > 90 mmHg, present before pregnancy',
                    'SBP > 150 mmHg, DBP > 100 mmHg, with edema'
                ],
                answer: 'SBP > 140 mmHg, DBP > 90 mmHg, onset after 20 weeks, resolves by 12 weeks postpartum',
                explanation: 'This defines the onset and resolution criteria for hypertension specific to pregnancy, without the presence of proteinuria seen in preeclampsia.'
            },
            {
                type: 'multiple-choice',
                question: 'In preeclampsia, what is the primary pathophysiological mechanism affecting fetal health?',
                options: [
                    'Increased blood flow to the placenta',
                    'Maternal vasospasm leading to hypoperfusion',
                    'Decreased maternal blood volume',
                    'Increased fetal movement'
                ],
                answer: 'Maternal vasospasm leading to hypoperfusion',
                explanation: 'Vasospasm reduces blood flow to the placenta, leading to insufficient oxygen and nutrients for the fetus, which can cause complications like SGA.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a major fetal-neonatal risk associated with hypertensive disorders in pregnancy?',
                options: [
                    'Macrosomia',
                    'Post-term delivery',
                    'Small Gestational Age (SGA)',
                    'Increased amniotic fluid'
                ],
                answer: 'Small Gestational Age (SGA)',
                explanation: 'Placental hypoperfusion from hypertension restricts fetal growth, leading to SGA.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the appropriate initial dose of Hydralazine HCl for hypertension management?',
                options: [
                    '20mg IV',
                    '5mg IV or 10mg IM',
                    '30mg IM only',
                    '15mg IV or 20mg IM'
                ],
                answer: '5mg IV or 10mg IM',
                explanation: 'This is the standard starting dose for managing severe hypertension in pregnancy to avoid a precipitous drop in blood pressure.'
            },
            {
                type: 'multiple-choice',
                question: 'Which nursing assessment finding requires immediate attention in preeclampsia?',
                options: [
                    'Mild ankle edema',
                    'Slight weight gain',
                    'Visual changes and blurred vision',
                    'Occasional fatigue'
                ],
                answer: 'Visual changes and blurred vision',
                explanation: 'Visual disturbances are a sign of cerebral edema or vasospasm, indicating severe preeclampsia and increased risk for seizures (eclampsia).'
            },
            {
                type: 'multiple-choice',
                question: 'Eclampsia is defined as:',
                options: [
                    'Mild hypertension during pregnancy',
                    'Development of convulsions or coma with signs of preeclampsia',
                    'Chronic hypertension before pregnancy',
                    'Gestational diabetes with hypertension'
                ],
                answer: 'Development of convulsions or coma with signs of preeclampsia',
                explanation: 'The defining characteristic of eclampsia is the onset of seizure activity in a patient with preeclampsia.'
            },
            {
                type: 'multiple-choice',
                question: 'What is considered the most serious complication of eclampsia?',
                options: [
                    'Mild headache',
                    'Temporary edema',
                    'Cerebral hemorrhage',
                    'Slight visual disturbance'
                ],
                answer: 'Cerebral hemorrhage',
                explanation: 'The severe hypertension and vasospasm associated with eclamptic seizures can lead to a stroke or cerebral hemorrhage, which is a life-threatening complication.'
            },
            {
                type: 'multiple-choice',
                question: 'Which medication is used as the primary treatment for preventing seizures in preeclampsia?',
                options: [
                    'Hydralazine',
                    'Labetalol',
                    'Nifedipine',
                    'Magnesium Sulfate'
                ],
                answer: 'Magnesium Sulfate',
                explanation: 'Magnesium Sulfate is the anticonvulsant of choice for seizure prophylaxis and treatment in patients with severe preeclampsia and eclampsia.'
            },
            {
                type: 'multiple-choice',
                question: 'What is a key nursing intervention in the clinical management of preeclampsia?',
                options: [
                    'Encourage increased salt intake',
                    'Maintain upright position at all times',
                    'Reduce environmental stimuli',
                    'Promote physical activity'
                ],
                answer: 'Reduce environmental stimuli',
                explanation: 'A quiet, low-light environment helps to decrease central nervous system irritability and can lower the risk of seizures.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a sign of impending eclampsia?',
                options: [
                    'Mild fatigue',
                    'Temporary loss of vision',
                    'Slight nausea',
                    'Minor headache'
                ],
                answer: 'Temporary loss of vision',
                explanation: 'Severe visual disturbances, along with severe headache and hyperreflexia, are warning signs that a seizure may be imminent.'
            },
            {
                type: 'multiple-choice',
                question: 'What is a critical complication of eclampsia?',
                options: [
                    'Mild dehydration',
                    'Temporary fatigue',
                    'Abruptio Placentae',
                    'Minor cramping'
                ],
                answer: 'Abruptio Placentae',
                explanation: 'The severe vasoconstriction and hypertension associated with eclampsia can cause the placenta to prematurely separate from the uterine wall, a life-threatening emergency.'
            },
            {
                type: 'multiple-choice',
                question: 'In the context of preeclampsia management, what is the significance of monitoring I/O?',
                options: [
                    'To track maternal weight gain',
                    'To assess for decreased urine output',
                    'To monitor fetal movement',
                    'To evaluate contractions'
                ],
                answer: 'To assess for decreased urine output',
                explanation: 'Decreased urine output (oliguria) is a sign of worsening preeclampsia and kidney damage due to vasospasm and reduced renal perfusion.'
            },
            {
                type: 'multiple-choice',
                question: 'Which dietary modification is recommended for preeclampsia patients?',
                options: [
                    'Low-protein, high-sodium diet',
                    'High-protein, low-sodium diet',
                    'Regular diet with increased fluids',
                    'Carbohydrate-restricted diet'
                ],
                answer: 'High-protein, low-sodium diet',
                explanation: 'A high-protein diet helps to replace protein lost in the urine, while a low-sodium diet helps to manage fluid retention and hypertension.'
            },
            {
                type: 'multiple-choice',
                question: "What action should be taken if there's no response to Hydralazine after 20mg IV or 30mg IM?",
                options: [
                    'Double the dose immediately',
                    'Wait another hour',
                    'Consider alternative medication',
                    'Discontinue all medications'
                ],
                answer: 'Consider alternative medication',
                explanation: 'If the maximum dose of one antihypertensive is ineffective, it is appropriate to switch to a different class of medication, such as Labetalol, rather than exceeding safe dosage limits.'
            },
            {
                type: 'multiple-choice',
                question: 'Which neonatal complication can result from maternal magnesium sulfate treatment?',
                options: [
                    'Hypermagnesemia',
                    'Hypocalcemia',
                    'Hyperglycemia',
                    'Hyponatremia'
                ],
                answer: 'Hypermagnesemia',
                explanation: 'Magnesium sulfate crosses the placenta, and high maternal doses can lead to elevated magnesium levels in the newborn, causing respiratory depression and hypotonia.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the recommended course of action if fetal distress is detected?',
                options: [
                    'Continue monitoring',
                    'Emergent delivery',
                    'Increase maternal activity',
                    'Decrease medication'
                ],
                answer: 'Emergent delivery',
                explanation: 'Fetal distress indicates severe placental insufficiency and hypoxia. The definitive treatment to protect the fetus is delivery.'
            },
            {
                type: 'multiple-choice',
                question: 'How is gestational hypertension diagnosed differently from chronic hypertension?',
                options: [
                    'Through blood tests only',
                    'Through ultrasound',
                    'Diagnosed retrospectively after 20 weeks',
                    'Through genetic testing'
                ],
                answer: 'Diagnosed retrospectively after 20 weeks',
                explanation: 'Gestational hypertension is defined by its onset after 20 weeks of gestation in a previously normotensive woman.'
            },
            {
                type: 'multiple-choice',
                question: 'Which of the following is a DIC-related complication in preeclampsia?',
                options: [
                    'Increased platelet production',
                    'Vascular endothelial damage',
                    'Improved blood circulation',
                    'Enhanced clotting function'
                ],
                answer: 'Vascular endothelial damage',
                explanation: 'Preeclampsia causes widespread endothelial damage, which can trigger disseminated intravascular coagulation (DIC), a complex clotting disorder.'
            },
            {
                type: 'multiple-choice',
                question: 'What should be monitored after an eclamptic seizure regarding fetal status?',
                options: [
                    'Fetal movement only',
                    'Maternal blood pressure only',
                    'Signs of fetal hypoxia and bradycardia',
                    'Maternal temperature only'
                ],
                answer: 'Signs of fetal hypoxia and bradycardia',
                explanation: 'An eclamptic seizure can cause transient fetal hypoxia and bradycardia due to uterine hypertonicity and reduced placental perfusion. Continuous fetal monitoring is essential.'
            }
        ];

        // DOM elements
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        const startBtn = document.getElementById('start-btn');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');

        const questionNumberEl = document.getElementById('question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');

        const questionTextEl = document.getElementById('question-text');
        const questionPromptEl = document.getElementById('question-prompt');
        const optionsContainer = document.getElementById('options-container');

        const feedbackBox = document.getElementById('feedback-box');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');

        // Game state
        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledQuestions = [];

        function startGame() {
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            currentQuestionIndex = 0;
            score = 0;
            shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);
            totalQuestionsEl.textContent = shuffledQuestions.length;
            scoreEl.textContent = score;

            showQuestion();
        }

        function showQuestion() {
            resetState();
            const question = shuffledQuestions[currentQuestionIndex];
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = question.question;
            questionPromptEl.textContent = question.prompt || '';

            if (question.type === 'multiple-choice' || question.type === 'multiple-select') {
                const inputType = question.type === 'multiple-choice' ? 'radio' : 'checkbox';
                question.options.forEach(option => {
                    const optionElement = document.createElement('label');
                    optionElement.className = 'flex items-center p-4 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors';
                    optionElement.innerHTML = `
                        <input type="${inputType}" name="option" class="h-5 w-5 ${inputType === 'radio' ? 'rounded-full' : 'rounded'} text-indigo-600 border-slate-300 focus:ring-indigo-500" value="${option}">
                        <span class="ml-4 text-slate-700">${option}</span>
                    `;
                    optionsContainer.appendChild(optionElement);
                });
            } else if (question.type === 'ordering') {
                const shuffledItems = [...question.items].sort(() => Math.random() - 0.5);
                shuffledItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'draggable bg-white p-4 border border-slate-200 rounded-lg shadow-sm flex items-center';
                    itemElement.setAttribute('draggable', 'true');
                    itemElement.innerHTML = `
                        <svg class="w-5 h-5 text-slate-400 mr-3" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        <span>${item}</span>
                    `;
                    optionsContainer.appendChild(itemElement);
                });
                addDragAndDropListeners();
            }
        }
        
        function resetState() {
            submitBtn.disabled = false;
            submitBtn.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            optionsContainer.innerHTML = '';
            feedbackBox.classList.add('hidden', 'opacity-0');
        }

        function handleSubmit() {
            const question = shuffledQuestions[currentQuestionIndex];
            let isCorrect = false;

            if (question.type === 'multiple-choice') {
                const selectedOption = document.querySelector('input[name="option"]:checked');
                if (selectedOption && selectedOption.value === question.answer) {
                    isCorrect = true;
                }
            } else if (question.type === 'multiple-select') {
                const selectedOptions = Array.from(document.querySelectorAll('input[name="option"]:checked')).map(el => el.value);
                isCorrect = selectedOptions.length === question.answer.length && selectedOptions.every(option => question.answer.includes(option));
            } else if (question.type === 'ordering') {
                const userOrder = Array.from(optionsContainer.querySelectorAll('.draggable span')).map(el => el.textContent);
                isCorrect = JSON.stringify(userOrder) === JSON.stringify(question.answer);
            }

            showFeedback(isCorrect);
            submitBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
            submitBtn.disabled = true;

            // Disable all inputs after submission
            const inputs = optionsContainer.querySelectorAll('input, .draggable');
            inputs.forEach(input => {
                if (input.tagName === 'INPUT') {
                    input.disabled = true;
                } else {
                    input.setAttribute('draggable', 'false');
                    input.classList.remove('draggable');
                }
            });
        }

        function showFeedback(isCorrect) {
            if (isCorrect) {
                score++;
                scoreEl.textContent = score;
                feedbackTitle.textContent = "Correct!";
                feedbackBox.className = 'mt-6 p-4 rounded-lg bg-emerald-100 text-emerald-800 opacity-0';
                feedbackTitle.className = 'font-bold text-lg mb-1 text-emerald-900';
            } else {
                feedbackTitle.textContent = "Incorrect";
                feedbackBox.className = 'mt-6 p-4 rounded-lg bg-red-100 text-red-800 opacity-0';
                feedbackTitle.className = 'font-bold text-lg mb-1 text-red-900';
            }
            feedbackText.textContent = shuffledQuestions[currentQuestionIndex].explanation;
            feedbackBox.classList.remove('hidden');
            setTimeout(() => feedbackBox.classList.remove('opacity-0'), 10);
        }

        function handleNext() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            const finalScore = Math.round((score / shuffledQuestions.length) * 100);
            document.getElementById('final-score').textContent = finalScore;
            document.getElementById('correct-answers').textContent = score;
            document.getElementById('total-final-questions').textContent = shuffledQuestions.length;
        }

        // Drag and Drop Logic
        function addDragAndDropListeners() {
            const draggables = document.querySelectorAll('.draggable');
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('dragging');
                });
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            optionsContainer.addEventListener('dragover', e => {
                e.preventDefault();
                const afterElement = getDragAfterElement(optionsContainer, e.clientY);
                const dragging = document.querySelector('.dragging');
                if (afterElement == null) {
                    optionsContainer.appendChild(dragging);
                } else {
                    optionsContainer.insertBefore(dragging, afterElement);
                }
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')];

            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }


        // Event Listeners
        startBtn.addEventListener('click', startGame);
        submitBtn.addEventListener('click', handleSubmit);
        nextBtn.addEventListener('click', handleNext);
        restartBtn.addEventListener('click', startGame);
    </script>
</body>
</html>

